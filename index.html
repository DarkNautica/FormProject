<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portfolio - Multi-Step Form</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/styles.css"> <!-- Ensure the path is correct -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
  <header>
    <div class="logo">
      <img src="assets/images/logo.png" alt="Logo" class="logo-img">
      <span class="logo-text">GREENLABS</span>
    </div>
    <button class="create-account">Create an account</button>
  </header>

  <div class="form-container">
    <div class="form-header">
      <h1>Using GREENLABS has never been easier!</h1>
      <p>Complete the sign-up process and receive a QR code you can use to access GREENLABS in the U.S.</p>
    </div>

    <!-- Define the progress bar only once -->
    <div class="form-progress">
      <div class="progress-step">
        <span class="step-number">1</span>
        <span class="step-label">Full Name</span>
      </div>
      <div class="progress-step">
        <span class="step-number">2</span>
        <span class="step-label">Personal Information</span>
      </div>
      <div class="progress-step">
        <span class="step-number">3</span>
        <span class="step-label">Identification</span>
      </div>
      <div class="progress-step">
        <span class="step-number">4</span>
        <span class="step-label">Your QR Code</span>
      </div>
    </div>

    <form id="multiStepForm">
      
      <!-- Step 1 -->
      <div class="form-step active"> <!-- First step is active by default -->
        <div class="form-row">
          <div class="form-group">
            <label for="firstName">First Name:</label>
            <input type="text" id="firstName" name="firstName" required>
          </div>
          <div class="form-group">
            <label for="middleName">Middle Name:</label>
            <input type="text" id="middleName" name="middleName">
          </div>
          <div class="form-group">
            <label for="lastName">Last Name:</label>
            <input type="text" id="lastName" name="lastName" required>
          </div>
        </div>
        <button type="button" class="next-step">Next</button>
      </div>

      <!-- Step 2 -->
      <div class="form-step">
        <div class="form-group">
          <label for="email">Email Address:</label>
          <input type="email" id="email" name="email" required>
        </div>
        <div class="form-group">
          <label for="phone">Phone Number:</label>
          <input type="tel" id="phone" name="phone" required>
        </div>
        <button type="button" class="next-step">Next</button>
      </div>

      <!-- Step 3 -->
      <div class="form-step">
        <div class="form-group">
          <label for="idNumber">Identification Number:</label>
          <input type="text" id="idNumber" name="idNumber" required>
        </div>
        <div class="form-group">
          <label for="idType">Identification Type:</label>
          <input type="text" id="idType" name="idType" required>
        </div>
        <button type="button" class="next-step">Next</button>
      </div>

   <!-- Step 4 -->
<div class="form-step">
  <div class="form-group" id="qrCodeSection" style="display: none;"> <!-- Hidden by default -->
    <label id="qrCodeLabel">Your QR Code:</label>
    <div id="qrCodeContainer" style="margin-top: 20px;"></div> <!-- QR Code will be displayed here -->
  </div>
  <button type="button" id="submitButton">Submit</button> <!-- Use type 'button' to prevent form submission -->
</div>


  <script src="scripts/scripts.js"></script> <!-- Ensure the correct path for JS -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  console.log('JavaScript is loaded'); // Debugging message to ensure script is running

  const formSteps = document.querySelectorAll('.form-step');
  const nextButtons = document.querySelectorAll('.next-step');
  const progressSteps = document.querySelectorAll('.progress-step');
  let currentStep = 0;

  function showStep(stepIndex) {
    formSteps.forEach((step, index) => {
      if (index === stepIndex) {
        step.classList.add('active');
      } else {
        step.classList.remove('active');
      }
    });

    progressSteps.forEach((step, index) => {
      if (index <= stepIndex) {
        step.classList.add('active');
      } else {
        step.classList.remove('active');
      }
    });
  }

  showStep(currentStep);

  nextButtons.forEach(button => {
    button.addEventListener('click', () => {
      currentStep++;
      if (currentStep >= formSteps.length) {
        currentStep = formSteps.length - 1;
      }
      showStep(currentStep);
    });
  });

  function generateQRCode() {
    console.log('QR Code generation initiated');

    const firstName = document.getElementById('firstName').value || 'First Name';
    const lastName = document.getElementById('lastName').value || 'Last Name';
    const email = document.getElementById('email').value || 'Email';

    const qrData = `Name: ${firstName} ${lastName}\nEmail: ${email}`;
    console.log('QR Code data:', qrData);

    document.getElementById('qrCodeContainer').innerHTML = '';

    const qrcode = new QRCode(document.getElementById('qrCodeContainer'), {
      text: qrData,
      width: 128,
      height: 128,
    });

    document.getElementById('qrCodeSection').style.display = 'block';
    console.log('QR Code section is now visible');
  }

  const submitButton = document.getElementById('submitButton');
  submitButton.addEventListener('click', (e) => {
    e.preventDefault();
    console.log('Submit button clicked');
    generateQRCode();
  });
});
</script>

</body>
</html>
